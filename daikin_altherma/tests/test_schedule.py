import unittest
import pprint

from daikin_altherma import DaikinAltherma


S1 = "$NULL|1|0000,180;0450,200;2300,180;,;,;,;0000,180;0450,200;2300,180;,;,;,;0000,180;0450,200;2300,180;,;,;,;0000,180;0450,200;2300,180;,;,;,;0000,180;0450,200;2300,180;,;,;,;0000,180;0450,200;2300,180;,;,;,;0000,180;0450,200;2300,180;,;,;,"


class TestHeatingSchedule(unittest.TestCase):
    def test_schedule(self):
        """Tests conversion from str to dict to str"""
        s_dict = DaikinAltherma._unmarshall_schedule(S1, DaikinAltherma._heating_value_parser)
        s_str = DaikinAltherma._marshall_schedule(s_dict)
        assert S1 == s_str

    def test_schedule_dict(self):
        schedule = {
            "Mo": {"0000": 22.0},
            "Tu": {},
            "We": {},
            "Th": {},
            "Fr": {},
            "Sa": {},
            "Su": {},
        }
        back_schedule = DaikinAltherma._unmarshall_schedule(
            DaikinAltherma._marshall_schedule(schedule), DaikinAltherma._heating_value_parser
        )
        assert schedule == back_schedule

    def test_rl(self):
        S1 = "$NULL|0|0700,200;0900,180;1700,200;2300,180;,;,;0700,200;0900,180;1700,200;2300,180;,;,;0700,200;0900,180;1700,200;2300,180;,;,;0700,200;0900,180;1700,200;2300,180;,;,;0700,200;0900,180;1700,200;2300,180;,;,;0800,200;2300,180;,;,;,;,;0800,200;2300,180;,;,;,;,"
        S2 = "$NULL|0|0700,200;0900,180;1200,200;1400,180;1700,200;2300,180;0700,200;0900,180;1200,200;1400,180;1700,200;2300,180;0700,200;0900,180;1200,200;1400,180;1700,200;2300,180;0700,200;0900,180;1200,200;1400,180;1700,200;2300,180;0700,200;0900,180;1200,200;1400,180;1700,200;2300,180;0800,200;2300,180;,;,;,;,;0800,200;2300,180;,;,;,;,"
        S3 = "$NULL|0|0800,200;2300,180;,;,;,;,;0800,200;2300,180;,;,;,;,;0800,200;2300,180;,;,;,;,;0800,200;2300,180;,;,;,;,;0800,200;2300,180;,;,;,;,;0800,200;2300,180;,;,;,;,;0800,200;2300,180;,;,;,;,"
        S4 = "JANEDOE|1|0330,200;1800,180;,;,;,;,;0330,200;1800,180;,;,;,;,;0330,200;1800,180;,;,;,;,;0330,200;1800,180;,;,;,;,;0330,200;1800,180;,;,;,;,;0330,200;1800,180;,;,;,;,;0330,200;1800,180;,;,;0000,180;0000,180"
        S5 = "$NULL|1|0010,120;0000,180;0000,180;0000,180;0000,180;0000,;,;,;,;,;,;,;,;,;,;,;,;,;,;,;,;,;,;,;,;,;,;,;,;,;,;,;,;,;,;,;,;,;,;,;,;,"
        S6 = "$NULL|1|,;,;,;,;,;,;,;,;,;,;,;,;,;,;,;,;,;,;,;,;,;,;,;,;,;,;,;,;,;,;,;,;,;,;,;,;,;,;,;,;,;,"

        schedules = [S1, S2, S3, S4, S5, S6]
        for s in schedules:
            DaikinAltherma._unmarshall_schedule(s, DaikinAltherma._heating_value_parser)